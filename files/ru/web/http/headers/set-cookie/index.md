---
title: Set-Cookie
slug: Web/HTTP/Headers/Set-Cookie
---

{{HTTPSidebar}}

Заголовок HTTP-ответа **`Set-Cookie`** используется для отправки куки-файлов с сервера агенту пользователя, чтобы он мог позже отправить его обратно на сервер.
Для отправки нескольких куки-файлов в одном ответе должны быть отправлены несколько заголовков **`Set-Cookie`**.

> **Предупреждение:** Браузеры блокируют доступ клиентскому JavaScript-коду к заголовкам `Set-Cookie`, как этого требует спецификация Fetch, определяющая `Set-Cookie` как [запрещённый заголовок ответа](https://fetch.spec.whatwg.org/#forbidden-response-header-name), который [должен быть исключён](https://fetch.spec.whatwg.org/#ref-for-forbidden-response-header-name%E2%91%A0) из любого ответа доступного для клиентских скриптов.

Больше информации в руководстве по [использованию HTTP-кук](/ru/docs/Web/HTTP/Cookies).

<table class="properties">
  <tbody>
    <tr>
      <th scope="row">Тип заголовка</th>
      <td>{{Glossary("Response header", "Заголовок ответа")}}</td>
    </tr>
    <tr>
      <th scope="row">{{Glossary("Forbidden header name")}}</th>
      <td>нет</td>
    </tr>
    <tr>
      <th scope="row">{{Glossary("Forbidden response header name")}}</th>
      <td>да</td>
    </tr>
  </tbody>
</table>

## Синтаксис

```
Set-Cookie: <cookie-name>=<cookie-value>
Set-Cookie: <cookie-name>=<cookie-value>; Expires=<date>
Set-Cookie: <cookie-name>=<cookie-value>; Max-Age=<non-zero-digit>
Set-Cookie: <cookie-name>=<cookie-value>; Domain=<domain-value>
Set-Cookie: <cookie-name>=<cookie-value>; Path=<path-value>
Set-Cookie: <cookie-name>=<cookie-value>; Secure
Set-Cookie: <cookie-name>=<cookie-value>; HttpOnly

Set-Cookie: <cookie-name>=<cookie-value>; SameSite=Strict
Set-Cookie: <cookie-name>=<cookie-value>; SameSite=Lax
Set-Cookie: <cookie-name>=<cookie-value>; SameSite=None {{experimental_inline}}

// Так же возможно указать несколько директив, например:
Set-Cookie: <cookie-name>=<cookie-value>; Domain=<domain-value>; Secure; HttpOnly
```

## Директивы

- По умолчанию - хост текущего URL документа, не включая поддомены
- В текущей спецификация начальная точка в имени хоста игнорируется (`.example.com`)
- Cookie будут отправляться также на поддомены указанного хоста
- Указывать несколько хостов недопустимо.

<!---->

- `<cookie-name>=<cookie-value>`

  - : Cookie начинается с пары имя-значение:

    - `<cookie-name>` может содержать любые символы US-ASCII, за исключением управляющих символов (CTLs), пробелов, или табуляций. Оно также не должно содержать разделительных символов, таких как следующие: `( ) < > @ , ; : \ " / [ ] ? = { }`.
    - `<cookie-value>` может быть опционально заключено в двойные кавычки, разрешены любые символы US-ASCII за исключением CTLs, пробела, двойных кавычек, запятой, точки с запятой, и обратного слеша. **Кодирование:** Многие реализации выполняют кодирование в значениях cookies, однако этого не требуется по спецификации RFC. Однако, это помогает удовлетворить требование о разрешённых символах в \<cookie-value>.
    - **`__Secure-` prefix** {{non-standard_inline}}: Cookies с именем, начинающимся с `__Secure-` (подчёркивание является частью префикса) должны быть установлены вместе с флагом secure, и должны быть с безопасной страницы (HTTPS).
    - **`__Host-` prefix** {{non-standard_inline}}: Cookies с именем, начинающимся с `__Host-` должны быть установлены с флагом secure `secure`, должны быть с безопасной страницы (HTTPS), не должны иметь определённый домен (и, следовательно, не не посылаются поддоменами), а также параметр Path должен быть "/".

- `Expires=<date>` {{optional_inline}}

  - : Максимальное время жизни cookie в формате метки даты-времени HTTP. См. {{HTTPHeader("Date")}} о деталях формата Если не определён, cookie будет иметь время жизни **сессионного cookie.** Сессия окончена, когда клиент отключается, что приводит к удалению сессионных cookie в этот момент. Однако, многие браузеры имеют возможность, называемую восстановление сессии, которая сохраняет все ваши вкладки и затем возвращает их, когда вы в следующий раз запускаете браузер. Cookies будут также присутствовать, словно вы никогда не закрывали браузер.

    Когда устанавливается срок действия, время и дата устанавливаются не относительно сервера, а относительно клиента, на котором установлено cookie,

- `Max-Age=<number>` {{optional_inline}}
  - : Количество секунд, после которого cookie устаревает. Ноль или отрицательное число приводят к моментальному устареванию cookie. Старые браузеры (ie6, ie7, and ie8) не поддерживают Max-Age. Для прочих браузеров, если оба параметра (`Expires` and `Max-Age`) установлены, `Max-Age` будет иметь преимущество.
- `Domain=<domain-value>` {{optional_inline}}

  - : Хост, на который будут отправляться cookie.

    По умолчанию - хост текущего URL документа, не включая поддомены
    В текущей спецификация начальная точка в имени хоста игнорируется (.example.com)
    Cookie будут отправляться также на поддомены указанного хоста
    Указывать несколько хостов недопустимо.

- `Path=<path-value>` {{optional_inline}}

  - : Путь, который должен существовать в запрошенном URL, иначе браузер не отправит заголовок Cookie.

    Пример: `/` - cookie будет отправляться со всеми запросами
    Пример: `/docs/` - cookie будет отправляться с запросами к директории docs и её поддиректориям

- `Secure` {{optional_inline}}

  - : Cookie будет отправлен на сервер только с запросами c использованием SSL и протокола HTTPS.

    Cookie не будет дополнительно шифроваться, поэтому в нем не стоит хранить конфиденциальную информацию.

    > **Note:** небезопасные сайты (`http:`) не могут использовать cookie с атрибутом "secure" (начиная с Chrome 52+ и Firefox 52+).

- `HttpOnly` {{optional_inline}}

  - : Запрещает JavaScript доступ к cookie

    Полезно для защиты от XSS-атак.

- `SameSite=<samesite-value>` {{optional_inline}}

  - :&#x20;

    - `Strict`: Браузер отправляет куки только для запросов с того же сайта (то есть запросов, исходящих с того же сайта, который установил куки). Если запрос исходит с другого URL, чем текущий, куки с атрибутом `SameSite=Strict` не отправляются.
    - `Lax`: Куки не отправляются при cross-site подзапросах, таких как вызовы для загрузки изображений или фреймов, но отправляются, когда пользователь переходит на URL с внешнего сайта, например, следуя по ссылке.
    - `None`: Браузер отправляет куки как с cross-site, так и с запросами с того же сайта.

    Позволяет серверам утверждать, что куки не должны отправляться вместе с cross-site запросами, что обеспечивает некоторую защиту от атак межсайтовой подделки запроса ({{Glossary("CSRF")}}).

    Современные браузеры используют `SameSite=Lax`. Если необходима работа `SameSite=None` cookie должна быть установлена с атрибутом `Secure`.

## Примеры

### Сессионный cookie

Сессионные cookies будут удалены после отключения клиента. В них не указываются директивы `Expires` или `Max-Age`. Учитывайте, что часто в браузере включено восстановление сессии.

```
Set-Cookie: sessionid=38afes7a8; HttpOnly; Path=/
```

### Постоянный cookie

Вместо истечения срока действия, когда клиент закрыт, срок действия постоянных файлов cookie истекает в определённую дату (`Expires`) или по истечении определённого промежутка времени (`Max-Age`).

```
Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT; Secure; HttpOnly
```

### Неверные домены

Файл cookie, принадлежащий домену, который не включает исходный сервер, [должен быть отклонён пользовательским](https://tools.ietf.org/html/rfc6265#section-4.1.2.3). Следующий cookie будет отклонён, если он был установлен сервером, размещённым на originalcompany.com.

```
Set-Cookie: qwerty=219ffwef9w0f; Domain=somecompany.co.uk; Path=/; Expires=Wed, 30 Aug 2019 00:00:00 GMT
```

### Cookie с префиксами

Имена cookie с префиксами `__Secure-` и `__Host-` могут использоваться только в том случае, если они установлены с директивой `secure` с защищенного (HTTPS) источника. Кроме того, куки с префиксом `__Host-` должны иметь путь "/" (весь хост) и не должны иметь атрибут домена. Для клиентов, которые не реализуют префиксы куки, нельзя полагаться на эти дополнительные гарантии, и куки всегда будут приниматься.

```
// Оба принимаются, если источник защищен (HTTPS)
Set-Cookie: __Secure-ID=123; Secure; Domain=example.com
Set-Cookie: __Host-ID=123; Secure; Path=/

// Отклонено из-за отсутствия директивы Secure
Set-Cookie: __Secure-id=1

// Отклонено из-за отсутствия директивы Path=/
Set-Cookie: __Host-id=1; Secure

// Отклонено из-за установки домена
Set-Cookie: __Host-id=1; Secure; Path=/; domain=example.com
```

## Спецификации

| Specification                                                                                    | Title                                                         |
| ------------------------------------------------------------------------------------------------ | ------------------------------------------------------------- |
| {{RFC("6265", "Set-Cookie", "4.1")}}                                                             | HTTP State Management Mechanism                               |
| [draft-ietf-httpbis-rfc6265bis-02](https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-02) | Cookie Prefixes, Same-Site Cookies, and Strict Secure Cookies |

## Совместимость с браузерами

{{Compat}}

## Compatibility notes

- Начиная с Chrome 52 и Firefox 52, небезопасные сайты (`http:`) не могут ставить куки если в заголовке есть "secure" директива.

## Смотрите также

- [HTTP cookies](/ru/docs/Web/HTTP/Cookies)
- {{HTTPHeader("Cookie")}}
- {{domxref("Document.cookie")}}
