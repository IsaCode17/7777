---
title: 主軸に沿ったフレックスアイテムの比率の制御
slug: >-
  Web/CSS/CSS_Flexible_Box_Layout/Controlling_Ratios_of_Flex_Items_Along_the_Main_Ax
tags:
  - Basis
  - CSS
  - Flex
  - Guide
  - flexbox
  - free space
  - grow
  - max-content
  - min-content
  - shrink
  - space
translation_of: >-
  Web/CSS/CSS_Flexible_Box_Layout/Controlling_Ratios_of_Flex_Items_Along_the_Main_Ax
---
<div>{{CSSRef}}</div>

<p class="summary">このガイドでは、フレックスアイテムに適用され、主軸に沿ってアイテムの寸法と自由度を制御することができる三つのプロパティを見ていきます。 — {{CSSxRef("flex-grow")}}, {{CSSxRef("flex-shrink")}}, {{CSSxRef("flex-basis")}} です。これらのプロパティがどのようにアイテムを伸縮させるかについて完全に理解することが、フレックスボックスをマスターするための鍵です。</p>

<h2 id="A_first_look" name="A_first_look">最初に見てみる</h2>

<p>三つのプロパティは、フレックスアイテムの自由度を以下の観点から制御します。</p>

<ul>
 <li><code>flex-grow</code>: このアイテムがどれだけ余白を得るか。</li>
 <li><code>flex-shrink</code>: このアイテムからどれだけ余白を削除できるか。</li>
 <li><code>flex-basis</code>: 伸長や縮小が発生する前のアイテムの寸法はいくつか。</li>
</ul>

<p>プロパティは通常、一括指定の {{CSSxRef("flex")}} プロパティとして表されます。以下のコードは <code>flex-grow</code> プロパティを <code>2</code> に、 <code>flex-shrink</code> を <code>1</code> に、 <code>flex-basis</code> を <code>auto</code> に設定します。</p>

<pre class="brush: css no-line-numbers">.item {
  flex: 2 1 auto;
}</pre>

<p>すでに<a href="/ja/docs/Web/CSS/CSS_Flexible_Box_Layout/Basic_Concepts_of_Flexbox">フレックスボックスの基本概念</a>の記事を読んでいるのであれば、すでにこれらのプロパティの紹介を受けているでしょう。ここではこれらを掘り下げ、使用するとブラウザーが何をするかを完全に理解できるようにします。</p>

<h2 id="Important_concepts_when_working_on_the_main_axis" name="Important_concepts_when_working_on_the_main_axis">主軸に合わせて動作する重要概念</h2>

<p>主軸に沿った比率をコントロールするためのフレックスプロパティの機能を見る前に、いくつかの概念を確認しておきましょう。これらは、フレックスアイテムの伸長や縮小が発生する前の<em>自然な</em>寸法と、余白の概念に関連しています。</p>

<h3 id="Flex_item_sizing" name="Flex_item_sizing">フレックスアイテムの寸法の変更</h3>

<p>フレックスアイテムをレイアウトするためのスペースを確保するには、まずアイテムの大きさをブラウザが知る必要があります。絶対的な長さの単位で適用される幅や高さを持たないアイテムは、どのようにして処理されるのでしょうか。</p>

<p>CSSには、{{CSSxRef('width','min-content','#min-content')}}と{{CSSxRef('width','max-content','#max-content')}}という概念があります。- これらのキーワードは、<a href="https://drafts.csswg.org/css-sizing-3/#width-height-keywords">CSS Intrinsic and Extrinsic Sizing Specification</a>で定義されており、<a href="/ja/docs/Web/CSS/length">length unit</a>の代わりに使用することができます。</p>

<p>例えば、以下の例では、テキストの文字列を含む2つの段落要素があります。最初の段落は、<code>min-content</code>の幅を持っています。このキーワードをサポートしているブラウザでは、テキストが自動的な折り返しができる場所をすべて利用して、はみ出さないようにできるだけ小さくなっているのがわかるはずです。これが、その文字列の <code>min-content</code> サイズです。基本的には、文字列の中で最も長い単語がサイズを決定します。</p>

<p>第2段落は<code>max-content</code>という値を持っているので、逆のことをします。それは、可能な限り大きくなり、自動的に改行をすることはありません。コンテナが狭すぎると、入っているボックスからあふれてしまいます。</p>

<p>{{EmbedGHLiveSample("css-examples/flexbox/ratios/min-max-content.html", '100%', 750)}}</p>

<p>お使いのブラウザがこれらのキーワードをまだサポートしていない場合、両方の段落はブロックフローの通常の段落としてレンダリングされます。 以下のスクリーンショットは、期待されるレンダリングを示しています。</p>

<p><img alt="The first paragraph is wrapped to the longest word, the second stretched out so as to cause overflow." src="https://mdn.mozillademos.org/files/15658/ratios-size.png" style="display: block; height: 558px; margin: 0px auto; width: 1520px;"></p>

<p>この動作と、<code>min-content</code>と<code>max-content</code>の効果を覚えておいて、後ほど<code>flex-grow</code>と<code>flex-shrink</code>について説明します。</p>

<h3 id="Positive_and_negative_free_space" name="Positive_and_negative_free_space">正と負のフリースペース</h3>

<p>これらの特性について説明するには、<strong>正と負の余白</strong>の概念を理解する必要があります。フレックスコンテナに正の余白がある場合、コンテナ内のフレックスアイテムを表示するのに必要なスペースよりも多くのスペースがあります。たとえば、幅500ピクセルのコンテナがあり、{{CSSxRef("flex-direction")}}が<code>row</code>で、幅100ピクセルのフレックスアイテムが3つある場合、200ピクセルの正の余白があり、コンテナいっぱいに表示させたい場合は、アイテム間で分配することができます。</p>

<p><img alt="Image showing space left over after items have been displayed." src="https://mdn.mozillademos.org/files/15654/Basics7.png" style="display: block; height: 198px; margin: 0px auto; width: 528px;"></p>

<p>アイテムの自然な大きさの合計が、フレックスコンテナ内の利用可能なスペースよりも大きい場合、負の余白が発生します。上の図のように幅500ピクセルのコンテナがあり、3つのフレックスアイテムの幅がそれぞれ200ピクセルの場合、必要なスペースは合計で600ピクセルとなり、100ピクセルの負の余白が発生します。これをアイテムから取り除くことで、コンテナにフィットさせることができます。</p>

<p><img alt="The items overflow the container" src="https://mdn.mozillademos.org/files/15655/ratios1.png" style="display: block; height: 198px; margin: 0px auto; width: 634px;"></p>

<p>屈曲特性を理解するためには、この正の余白の分配と負の余白の除去を理解する必要があります。</p>

<p>以下の例では、 {{CSSxRef("flex-direction")}} を row に設定して作業を行っているため、アイテムのサイズは常に幅に基づいて決定されます。すべてのアイテムの合計幅とコンテナの幅を比較することで、正と負の余白を計算します。同様に、各例を<code>flex-direction: column</code>で試すこともできます。主軸は列になり、アイテムの高さとそれらが入っているコンテナの高さを比較して、正と負の余白を計算する必要があります。</p>

<h2 id="The_flex-basis_property" name="The_flex-basis_property">flex-basis プロパティ</h2>

<p>{{CSSxRef("flex-basis")}}プロパティは、余白の配分が行われる前のフレックスアイテムの初期サイズを指定します。このプロパティの初期値は<code>auto</code>です。<code>flex-basis</code>が<code>auto</code>に設定されている場合、アイテムの初期サイズを計算するために、ブラウザはまずアイテムのメイン・サイズに絶対的なサイズが設定されているかどうかをチェックします。これは、アイテムの幅を200ピクセルにした場合です。この場合、<code>200px</code>がこのアイテムの<code>flex-basis</code>となります。</p>

<p>アイテムのサイズが自動指定である場合、<code>auto</code>はコンテンツのサイズで解決します。flexboxはアイテムの<code>max-content</code>サイズを<code>flex-basis</code>として受け取るので、この時点で<code>min-</code>と<code>max-content</code>サイズの知識が役に立ちます。次の例は、これを示すのに役立ちます。</p>

<p>この例では、<code>flex-grow</code>と<code>flex-shrink</code>の両方を<code>0</code>に設定して、柔軟性のない一連のボックスを作成しました。ここでは、メインサイズとして150ピクセルの明示的な幅が設定されている最初のアイテムが<code>flex-basis</code>の<code>150px</code>を取るのに対し、他の2つのアイテムは幅を持たないため、コンテンツの幅に応じてサイズが調整されることがわかります。</p>

<p>{{EmbedGHLiveSample("css-examples/flexbox/ratios/flex-basis.html", '100%', 500)}}</p>

<p><code>auto</code>キーワードに加えて、 <code>content</code>キーワードを<code>flex-basis</code>として使用することができます。これにより、アイテムに幅が設定されていても、コンテンツサイズから<code>flex-basis</code>が取られます。これは新しいキーワードで、ブラウザのサポートも少ないのですが、flex-basisとして<code>auto</code>を使用し、自動サイズにするためにアイテムに幅が設定されていないことを確認することで、常に同じ効果を得ることができます。</p>

<p>スペース配分を行う際にフレックスボックスにアイテムのサイズを完全に無視させたい場合は、<code>flex-basis</code>を<code>0</code>に設定します。これは基本的に、フレックスボックスにすべてのスペースが確保されており、それを比例して分配するように指示します。この例は、<code>flex-grow</code>を見ていきましょう。</p>

<h2 id="The_flex-grow_property" name="The_flex-grow_property">flex-grow プロパティ</h2>

<p>{{CSSxRef("flex-grow")}}プロパティは、<strong>フレックスの成長係数</strong>を指定します。これは、正の余白が分配されたときに、フレックスアイテムがフレックスコンテナ内の他のフレックスアイテムに対してどれだけ成長するかを決定します。</p>

<p>すべてのアイテムが同じ<code>flex-grow</code>値を持っている場合、スペースはすべてのアイテムの間で均等に分配されます。このような状況を望むのであれば、一般的には<code>1</code>を値として使用しますが、すべてのアイテムに<code>88</code>、<code>100</code>、または<code>1.2</code>の<code>flex-grow</code>を与えることもできます - これは比率なのです。もし、係数が全て同じで、フレックスコンテナに正の余白があれば、それは全てに均等に分配されます。</p>

<h3 id="Combining_flex-grow_and_flex-basis" name="Combining_flex-grow_and_flex-basis"><code>flex-grow</code> と <code>flex-basis</code> を組み合わせる</h3>

<p>Things can get confusing in terms of how <code>flex-grow</code> and <code>flex-basis</code> interact. Let's consider the case of three flex items of differing content lengths and the following <code>flex</code> rules applied to them:</p>

<p><code>flex: 1 1 auto;</code></p>

<p>In this case the <code>flex-basis</code> value is <code>auto</code> and the items don’t have a width set, and so are auto-sized. This means that flexbox is looking at the <code>max-content</code> size of the items. After laying the items out we have some positive free space in the flex container, shown in this image as the hatched area:</p>

<p><img alt="Images shows the positive free space as a hatched area" src="https://mdn.mozillademos.org/files/15656/ratios2.png" style="display: block; height: 100px; margin: 0px auto; width: 634px;"></p>

<p>We are working with a <code>flex-basis</code> equal to the content size so the available space to distribute is subtracted from the total available space (the width of the flex container), and the leftover space is then shared out equally among each item. Our bigger item ends up bigger because it started from a bigger size, even though it has the same amount of spare space assigned to it as the others:</p>

<p><img alt="The positive space is distributed between items" src="https://mdn.mozillademos.org/files/15657/ratios3.png" style="display: block; height: 100px; margin: 0px auto; width: 634px;"></p>

<p>If what you actually want is three equally-sized items, even if they start out at different sizes, you should use this:</p>

<p><code>flex: 1 1 0;</code></p>

<p>Here we are saying that the size of the item for the purposes of our space distribution calculation is <code>0</code> — all the space is up for grabs and as all of the items have the same <code>flex-grow</code> factor, they each get an equal amount of space distributed. The end result is three equal width, flexible items.</p>

<p>Try changing the <code>flex-grow</code> factor from 1 to 0 in this live example to see the different behavior:</p>

<p>{{EmbedGHLiveSample("css-examples/flexbox/ratios/flex-grow.html", '100%', 520)}}</p>

<h3 id="Giving_items_different_flex-grow_factors" name="Giving_items_different_flex-grow_factors">アイテムに別の flex-grow 要素を与える</h3>

<p>Our understanding of how <code>flex-grow</code> works with <code>flex-basis</code> allows us to have further control over our individual item sizes by assigning items different <code>flex-grow</code> factors. If we keep our <code>flex-basis</code> at <code>0</code> so all of the space can be distributed, we could assign each of the three flex items a different <code>flex-grow</code> factor. In the example below I am using the following values:</p>

<ul>
 <li><code>1</code> for the first item.</li>
 <li><code>1</code> for the second item.</li>
 <li><code>2</code> for the third item.</li>
</ul>

<p>Working from a <code>flex-basis</code> of <code>0</code> this means that the available space is distributed as follows. We need to add up the flex grow factors, then divide the total amount of positive free space in the flex container by that number, which in this case is 4. We then share out the space according to the individual values — the first item gets one part, the second one part, the third two parts. This means that the third item is twice the size of the first and second items.</p>

<p>{{EmbedGHLiveSample("css-examples/flexbox/ratios/flex-grow-ratios.html", '100%', 520)}}</p>

<p>Remember that you can use any positive value here. It is the ratio between one item and the others that matters. You can use large numbers, or decimals — it is up to you. To test that out change the values assigned in the above example to <code>.25</code>, <code>.25</code>, and <code>.50</code> — you should see the same result.</p>

<h2 id="The_flex-shrink_property" name="The_flex-shrink_property"><code>flex-shrink</code> プロパティ</h2>

<p>The {{CSSxRef("flex-shrink")}} property specifies the <strong>flex shrink factor</strong>, which determines how much the flex item will shrink relative to the rest of the flex items in the flex container when negative free space is distributed.</p>

<p>This property deals with situations where the browser calculates the <code>flex-basis</code> values of the flex items, and finds that they are too large to fit into the flex container. As long as <code>flex-shrink</code> has a positive value the items will shrink in order that they do not overflow the container.</p>

<p>So where <code>flex-grow</code> deals with adding available space, <code>flex-shrink</code> manages taking away space to make boxes fit into their container without overflowing.</p>

<p>In the next live example I have three items in a flex container; I’ve given each a width of 200 pixels, and the container is 500 pixels wide. With <code>flex-shrink</code> set to <code>0</code> the items are not allowed to shrink and so they overflow the box.</p>

<p>{{EmbedGHLiveSample("css-examples/flexbox/ratios/flex-shrink.html", '100%', 500)}}</p>

<p>Change the <code>flex-shrink</code> value to <code>1</code> and you will see each item shrink by the same amount, in order that all of the items now fit in the box. They have become smaller than their initial width in order to do so.</p>

<h3 id="Combining_flex-shrink_and_flex-basis" name="Combining_flex-shrink_and_flex-basis"><code>flex-shrink</code> と <code>flex-basis</code> を組み合わせる</h3>

<p>You could say that <code>flex-shrink</code> works in pretty much the same way as <code>flex-grow</code>. However there are two reasons why it isn’t <em>quite</em> the same.</p>

<p>While it is usually subtle, defined in the specification is one reason why <code>flex-shrink</code> isn’t quite the same for negative space as <code>flex-grow</code> is for positive space:</p>

<blockquote>
<p>“Note: The flex shrink factor is multiplied by the flex base size when distributing negative space. This distributes negative space in proportion to how much the item is able to shrink, so that e.g. a small item won’t shrink to zero before a larger item has been noticeably reduced.”</p>
</blockquote>

<p>The second reason is that flexbox prevents small items from shrinking to zero size during this removal of negative free space. The items will be floored at their <code>min-content</code> size — the size that they become if they take advantage of any soft wrapping opportunities available to them.</p>

<p>You can see this <code>min-content</code> flooring happen in the below example, where the <code>flex-basis</code> is resolving to the size of the content. If you change the width on the flex container — increasing it to 700px for example — and then reduce the flex item width, you can see that the first two items will wrap, however they will never become smaller than that <code>min-content</code> size. As the box gets smaller space is then just removed from the third item.</p>

<p>{{EmbedGHLiveSample("css-examples/flexbox/ratios/flex-shrink-min-content.html", '100%', 500)}}</p>

<p>In practice the shrinking behaviour does tend to give you reasonable results. You don’t usually want your content to disappear completely or for boxes to get smaller than their minimum content, so the above rules make sense in terms of sensible behaviour for content that needs to be shrunk in order to fit into a container.</p>

<h3 id="Giving_items_different_flex-shrink_factors" name="Giving_items_different_flex-shrink_factors">アイテムに別の <code>flex-shrink</code> 要素を与える</h3>

<p>In the same way as <code>flex-grow</code>, you can give flex-items different <code>flex-shrink</code> factors. This can help change the default behaviour if, for example, you want an item to shrink more or less rapidly than its siblings or not shrink at all.</p>

<p>In the following live example the first item has a <code>flex-shrink</code> factor of 1, the second <code>0</code> (so it won’t shrink at all), and the third <code>4</code>. The third item therefore shrinks more rapidly than the first. Play around with the different values — as for <code>flex-grow</code> you can use decimals or larger numbers here. Choose whatever makes most sense to you.</p>

<p>{{EmbedGHLiveSample("css-examples/flexbox/ratios/flex-shrink-ratios.html", '100%', 570)}}</p>

<h2 id="Mastering_sizing_of_flex_items" name="Mastering_sizing_of_flex_items">flex アイテムのサイズ設定をマスターする</h2>

<p>The key to really understanding how flex item sizing works is in understanding the number of things that come into play. Consider the following aspects, which we have already discussed in these guides:</p>

<h3 id="What_sets_the_base_size_of_the_item" name="What_sets_the_base_size_of_the_item">アイテムの基本サイズを何がセットするか？</h3>

<ol>
 <li>Is <code>flex-basis</code> set to <code>auto</code>, and does the item have a width set? If so, the size will be based on that width.</li>
 <li>Is <code>flex-basis</code> set to <code>auto</code> or <code>content</code> (in a supporting browser)? If so, the size is based on the item size.</li>
 <li>Is <code>flex-basis</code> a length unit, but not zero? If so this is the size of the item.</li>
 <li>Is <code>flex-basis</code> set to <code>0</code>? if so then the item size is not taken into consideration for the space-sharing calculation.</li>
</ol>

<h3 id="Do_we_have_available_space" name="Do_we_have_available_space">利用できるスペースが残っているか？</h3>

<p>Items can’t grow with no positive free space, and they won’t shrink unless there is negative free space.</p>

<ol>
 <li>If we took all of the items and added up their widths (or heights if working in a column), is that total <strong>less</strong> than the total width (or height) of the container? If so, then you have positive free space and <code>flex-grow</code> comes into play.</li>
 <li>If we took all of the items and added up their widths (or heights if working in a column), is that total <strong>more</strong> than the total width (or height) of the container? If so, you have negative free space and <code>flex-shrink</code> comes into play.</li>
</ol>

<h3 id="Other_ways_to_distribute_space" name="Other_ways_to_distribute_space">スペースを配分する別の方法</h3>

<p>If you do not want space added to the items, remember that you can deal with free space between or around items using the alignment properties described in the guide to aligning items in a flex container. The {{CSSxRef("justify-content")}} property will enable the distribution of free space between or around items. You can also use auto margins on flex items to absorb space and create gaps between items.</p>

<p>With all the flex tools at your disposal you will find that most tasks can be achieved, although it might take a little bit of experimentation at first.</p>
